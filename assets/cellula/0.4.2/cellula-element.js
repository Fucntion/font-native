define("cellula/0.4.2/cellula-element",["./cellula-namespace"],function(a,b,c){function d(a,b){return b?f.isString(b)?a[b]:f.isArray(b)?f.map(b,function(b){return a[b]}):void 0:f.mix({},a)}var e=a("./cellula-namespace"),f=e._util,g=e.Element=new e.Class("Element",{key:"",_data:{},_previous:{},storage:{toStorage:function(a){function b(a,b){c.setItem(b,"object"!=typeof a?a:JSON.stringify(a))}var c,d=this.__self__;if(c=window.localStorage){if(window.JSON||(window.JSON=f.JSON),!a)return f.each(d._data,b);if(d.has(a))return b(d.get(a),a);if(f.isArray(a))return f.each(a,function(a){this.has(a)&&b(this.get(a),a)},d)}},get:function(a){var b,c={},e=this.__self__;return(b=window.localStorage)?(f.each(e._data,function(a,d){d in b&&(c[d]=b[d])}),d(c,a)):void 0}},_setup:function(a){if(this.storage.__self__=this,f.isObject(a))for(var b in a)b in this&&f.has(a,b)&&(!f.isFunction(a[b])||"init"!=b)&&(this[b]=f.isObject(this[b])&&f.isObject(a[b])?f.deepMix({},this[b],a[b]):a[b]?a[b]:this[b])},init:function(a){this._setup(a),this.key||(this.key=this.__cid__)},set:function(a,b,c){if(!a)throw new Error("data structure error!");var d,e=-1;return f.isObject(a)&&(d=a,c=b),f.isString(a)&&(d={},d[a]=b),d=f.deepMix({},this._data,d),e=this.validate(d,this),void 0!==e?e:(this._previous=f.mix({},this._data),this._data=d,this)},has:function(a){return this._data.hasOwnProperty(a)},reset:function(a){if(!a)return(this._previous=f.mix({},this._data))&&(this._data={});if(f.isObject(a)){var b=f.mix({},a),c=this.validate(b,this);return void 0!==c?(this.trigger("error"),!1):(this._previous=f.mix({},this._data),this._data=b,!0)}return!1},removeAttribute:function(){},save:function(){},destroy:function(){return this.applyInterface("Collection.remove",this.key)},validate:function(){},getPrevious:function(a){return d(this._previous,a)},get:function(a){return d(this._data,a)}});c.exports=g});