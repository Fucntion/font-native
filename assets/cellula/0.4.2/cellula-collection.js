define("cellula/0.4.2/cellula-collection",["./cellula-namespace"],function(a,b,c){var d=a("./cellula-namespace"),e=d._util,f=d.Collection=new d.Class("Collection",{type:d.Element,_index:[],_elements:{},_initCfg:function(a){if(e.isObject(a))for(var b in this)a.hasOwnProperty(b)&&(this[b]=e.isObject(this[b])&&e.isObject(a[b])?e.deepMix({},this[b],a[b]):a[b]?a[b]:this[b])},_elConfig:function(a){if(e.isObject(a)){var b=new this.type(a);b.registerInterface("remove",this),this._elements[b.key]=b,this._index.push(b.key)}},init:function(a,b){this._initCfg(a),e.isArray(b)?e.each(b,function(a){this._elConfig(a)},this):this._elConfig(b)},clear:function(){this._index=[],this._elements={}},reverse:function(){return this._index.reverse(),this},size:function(){return this._index.length},add:function(a,b){if(b=parseInt(b),isNaN(b))return this.push(a);if(a instanceof this.type){if(this._elements[a.key]=a,0>=b)return this._index.unshift(a.key);if(b>=this._index.length)return this._index.push(a.key);var c=this._index.concat([]),d=c.splice(b);c.push(a.key),this._index=c.concat(d)}return this._index.length},remove:function(a){return a&&(e.isString(a)&&(delete this._elements[a],e.each(this._index,function(b,c){b==a&&this._index.splice(c,1)},this)),a instanceof this.type&&(delete this._elements[a.key],e.each(this._index,function(b,c){b==a.key&&this._index.splice(c,1)},this))),this},shift:function(){},push:function(a){return a instanceof this.type?(this._elements[a.key]=a,this._index.push(a.key)):void 0},pop:function(){var a=this._index.pop(),b=this._elements[a];return delete this._elements[a],b},get:function(a){if(!a)return e.values(e.mix({},this._elements));if(e.isString(a))return this._elements[a]?this._elements[a]:this._elements[this._index[a]];if(e.isArray(a)){var b=[];return e.each(a,function(a){e.isString(a)&&b.push(this._elements[a]?this._elements[a]:this._elements[this._index[a]])},this),b}},save:function(a){var b,c,d,f,g=this._elements;if("Cell"===this.type.prototype.__getAncestor__()){if(e.isString(a))return g[a]&&g[a].collection?g[a].collection.save():!1;if(e.isArray(a))for(c=0,d=a.length;d>c;c++)if(b=g[a[c]]&&g[a[c]].collection?g[a[c]].collection.save():!1,!b)return b;if(!a)for(f in g)if(b=g[f]&&g[f].collection?g[f].collection.save():!1,!b)return b;return!0}if("Element"===this.type.prototype.__getAncestor__()){if(e.isString(a))return g[a]?g[a].save():!1;if(e.isArray(a))for(c=0,d=a.length;d>c;c++)if(b=g[a[c]]?g[a[c]].save():!1,!b)return b;if(!a)for(f in g)if(b=g[f]?g[f].save():!1,!b)return b;return!0}return!1}},"NEW");c.exports=f});