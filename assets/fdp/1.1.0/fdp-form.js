define("fdp/1.1.0/fdp-form",["$","cellula/0.4.2/cellula","cellula/0.4.2/cellula-namespace","cellula/0.4.2/cellula-class","cellula/0.4.2/cellula-util","cellula/0.4.2/cellula-events","cellula/0.4.2/cellula-cell","cellula/0.4.2/cellula-element","cellula/0.4.2/cellula-collection","./fdp-namespace"],function(a,b,c){var d=a("$"),e=a("cellula/0.4.2/cellula"),f=a("./fdp-namespace"),g=f.FormItem,h=e._util,i=e.Class,j=(e.Element,e.Cell),k=e.Collection,l=f.Form=new i("Form",{type:"SINGLE",validateAll:void 0,element:void 0,submitButton:void 0,autoSubmit:!0,isDisabled:!1,disabledClass:"mblue",transcript:{},collection:null,itemList:void 0,tableView:void 0,paging:void 0,onFormValidated:void 0,init:function(a){this._super(a),this.key||(this.key=this.__cid__),this._bindAll("search","doSearch","dataDispatch","prepare"),this.collection=new k({type:g}),this.rootNode&&(this.element=d("form",this.rootNode),this.submitButton=d("input[type=submit]",this.rootNode)),this.isDisabled&&this.disabled(!0),this.paging&&(this.follow(this.paging),this.paging.follow(this),this.tableView&&(this.paging.follow(this.tableView),this.tableView.follow(this.paging),this.tableView.follow(this),this.follow(this.tableView))),this.createFormItems()&&this.registerEvents(),this.trans()},disabled:function(a){a?(this.submitButton.attr("disabled","disabled"),this.submitButton.parent().addClass("mi-button-"+this.disabledClass+"-disabled")):(this.submitButton.removeAttr("disabled"),this.submitButton.parent().removeClass("mi-button-"+this.disabledClass+"-disabled"))},registerEvents:function(){d(this.rootNode).on("submit",this.prepare)},createFormItems:function(){return this.itemList&&d.isPlainObject(this.itemList)?(h.each(this.itemList,function(a){a.register("FORMITEM:TRIGGERFORM",this),this.register("FORMITEM:VALIDATEING",a),this.collection.push(a)},this),this.itemList):void 0},trans:function(){var a=this;h.each(a.collection.get(),function(b){a.transcript[b.key]=!1})},prepare:function(a){a.preventDefault(),this.validate(a)},submit:function(a){a.validate&&(window.console&&console.log(this.getData()),"SEARCH"==this.type&&this.doSearch())},validate:function(){this.trans(),this.emit("FORMITEM:VALIDATEING")},objLen:function(a){var b,c=0;for(b in a)a.hasOwnProperty(b)&&c++;return c},getData:function(){var a={};return h.each(this.collection.get(),function(b){a=h.mix(a,b.getData())},this),a},receiver:function(a){if(a){var b=a.target,c=a.name.split(":")[1];switch(c){case"TRIGGERFORM":var d=b.key,e=b.validate,f=arguments[1].tg;if(this.transcript[d]=e,h.each(this.transcript,function(a){return a===!1?(this.validateAll=!1,"break"):void(this.validateAll=!0)},this,"break"),this.validateAll&&this.disabled(!1),"FORM"===f){var g={validate:this.validateAll,form:this.element};this.autoSubmit?this.submit(g):this.onFormValidated&&this.onFormValidated.call(this,g)}if(this.isDisabled){var i,j,k,l=!1,m=this.collection.get();for(i=0,len=m.length;i<len;i++){var j=m[i].required,k=m[i].validate;if(j||!k){if(!j&&!k&&(l=k,!l))break;if(j&&(l=k,!l))break}}this.disabled(!l),window.console&&console.log(l)}break;case"SETPAGEDEFAULT":this.pageDefault=arguments[1];break;case"SETPAGECOLLECTION":this.pageCollection=arguments[1];break;case"DOSEARCH":this.doSearch(arguments[1])}}},doSearch:function(a){var b,c,d,e,f,g,i=!1;a&&a.preventDefault&&(a.preventDefault(),i=!0),i||!i&&!a?(this.emit("PAGINATOR:GETDEFAULTPAGE"),this.emit("PAGINATOR:GETCOLLECTION"),b=this.pageDefault,c=this.pageCollection,d=c.get("size"),f=d.get(),e=h.values(f)[0],g=h.mix(this.getData(),h.isEmpty(e)?b.size:e,b.number||{})):!i&&a&&(g=h.mix({},this.getData(),a)),g&&this.search(g)},customSearch:function(a){window.console&&console.log(a)},search:function(a){this.customSearch.call(this,a)},dataDispatch:function(a){a.queryForm&&a.result&&a.result.paging&&(this.emit("TABLE:TABLERENDER",a.result.detail),this.emit("PAGINATOR:PAGINGRENDER",a.result.paging))}}).inherits(j);l.build=function(a,b){if("string"!=typeof a)throw new Error("`name` is expect a String type parameters.");return d.isPlainObject(b)?new i(a,b,"NEW").inherits(f.Form):null},c.exports=l});