define("alipay/slider/1.1.1/slider",["$","./mouse","arale/widget/1.0.3/widget","arale/base/1.0.1/base","arale/class/1.0.0/class","arale/events/1.0.0/events"],function(e,t,s){var i=e("$"),a=e("./mouse"),n=a.extend({attrs:{animate:!0,distance:0,max:100,min:0,orientation:"horizontal",allowCross:!1,range:!1,step:1,value:0,values:null},setup:function(){var e,t,s=this.get("disabled"),a=this.get("range"),n=this.get("values"),h=this.get("min"),u=this.element.find(".ui-slider-handle").addClass("ui-state-default"),l="<a class='ui-slider-handle ui-state-default' href='#'></a>",o=[],r=this;for(this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+(s?" ui-slider-disabled ui-disabled":"")),this.range=i([]),a&&(a===!0&&(n||(n=[h,h]),n.length&&2!==n.length&&(n=[n[0],n[0]])),this.range=i("<div></div>").appendTo(this.element).addClass("ui-slider-range"+("min"===a||"max"===a?" ui-slider-range-"+a:""))),t=n&&n.length||1,e=u.length;t>e;e++)o.push(l);this.handles=u.add(i(o.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(e){e.preventDefault()}).mouseenter(function(){s||i(this).addClass("ui-state-hover")}).mouseleave(function(){i(this).removeClass("ui-state-hover")}).focus(function(){s?i(this).blur():(i(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),i(this).addClass("ui-state-focus"))}).blur(function(){i(this).removeClass("ui-state-focus")}),this.handles.each(function(e){i(this).data("ui-slider-handle-index",e)}),r._refreshValue(),this._animateOff=!1},destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled"),this._mouseDestroy(),n.superclass.destroy.call(this)},_mouseCapture:function(e){var t,s,a,n,h,u,l,o,r=this,d=this.get("min"),m=this.get("max");return this.get("disabled")?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),t={x:e.pageX,y:e.pageY},s=this._normValueFromMouse(t),this.values(0)===this.values(1)?(h=s>this.values(0)?1:this.values(0)>s?0:this._last_index,n=i(this.handles[h])):(a=m-d+1,this.handles.each(function(e){var t=Math.abs(s-r.values(e));a>t&&(a=t,n=i(this),h=e)})),this.get("range")===!0&&this.values(1)===this.get("min")&&(h=1,n=i(this.handles[h])),this._last_index=h,u=this._start(e,h),u===!1?!1:(this._mouseSliding=!0,this._handleIndex=h,n.addClass("ui-state-active").focus(),l=n.offset(),o=!i(e.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=o?{left:0,top:0}:{left:e.pageX-l.left-n.width()/2,top:e.pageY-l.top-n.height()/2-(parseInt(n.css("borderTopWidth"),10)||0)-(parseInt(n.css("borderBottomWidth"),10)||0)+(parseInt(n.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(e,h,s),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},s=this._normValueFromMouse(t);if(this.get("range")&&this.get("allowCross")&&this.values(0)===this.values(1)){var i=this._handleIndex;this.values(0)>s?this._handleIndex=0:s>this.values(1)&&(this._handleIndex=1),this.trigger("slide",e,{handle:this.handles[i],value:this.values(0),values:this.values()}),this.handles.eq(this._handleIndex).focus()}return this._slide(e,this._handleIndex,s),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.get("orientation")?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,s,i,a,n,h=this.get("min"),u=this.get("max");return"horizontal"===this.orientation?(t=this.elementSize.width,s=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,s=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),i=s/t,i>1&&(i=1),0>i&&(i=0),"vertical"===this.orientation&&(i=1-i),a=u-h,n=h+i*a,this._trimAlignValue(n)},_start:function(e,t){var s={handle:this.handles[t],value:this.value()},i=this.get("values");return i&&i.length&&(s.value=this.values(t),s.values=this.values()),this.trigger("start",e,s)},_slide:function(e,t,s){var i,a,n,h=this.get("range"),u=this.get("values");u&&u.length?(i=this.values(t?0:1),2===u.length&&h===!0&&(0===t&&s>i||1===t&&i>s)&&(s=i),s!==this.values(t)&&(a=this.values(),a[t]=s,n=this.trigger("slide",e,{handle:this.handles[t],value:s,values:a}),i=this.values(t?0:1),n!==!1&&this.values(t,s,!0))):s!==this.value()&&(n=this.trigger("slide",e,{handle:this.handles[t],value:s}),n!==!1&&this.value(s))},_stop:function(e,t){var s={handle:this.handles[t],value:this.value()},i=this.get("values");i&&i.length&&(s.value=this.values(t),s.values=this.values()),this.trigger("stop",e,s)},_change:function(e,t){if(!this._mouseSliding){var s={handle:this.handles[t],value:this.value()},i=this.get("values");i&&i.length&&(s.value=this.values(t),s.values=this.values()),this.trigger("change",e,s)}},value:function(e){return arguments.length?(this.set("value",this._trimAlignValue(e)),this._refreshValue(),this._change(null,0),void 0):this._value()},values:function(e,t){var s,a,n,h=this.get("values");if(arguments.length>1)return h[e]=this._trimAlignValue(t),this._refreshValue(),this._change(null,e),void 0;if(!arguments.length)return this._values();if(!i.isArray(arguments[0]))return h&&h.length?this._values(e):this.value();for(s=h,a=arguments[0],n=0;s.length>n;n+=1)s[n]=this._trimAlignValue(a[n]),this._change(null,n);this._refreshValue()},_value:function(){var e=this.get("value");return e=this._trimAlignValue(e)},_values:function(e){var t,s,i,a=this.get("values");if(arguments.length)return t=a[e],t=this._trimAlignValue(t);for(s=a.slice(),i=0;s.length>i;i+=1)s[i]=this._trimAlignValue(s[i]);return s},_trimAlignValue:function(e){var t=this.get("min"),s=this.get("max"),i=this.get("step");if(t>=e)return t;if(e>=s)return s;var i=i>0?i:1,a=(e-t)%i,n=e-a;return 2*Math.abs(a)>=i&&(n+=a>0?i:-i),parseFloat(n.toFixed(5))},_refreshValue:function(){var e,t,s,a,n,h=this.get("range"),u=this.get("values"),l=this.get("min"),o=this.get("max"),r=this,d=this.get("animate"),m=this._animateOff?!1:d,g={};u&&u.length?this.handles.each(function(s){t=100*((r.values(s)-l)/(o-l)),g["horizontal"===r.orientation?"left":"bottom"]=t+"%",i(this).stop(1,1)[m?"animate":"css"](g,d),h===!0&&("horizontal"===r.orientation?(0===s&&r.range.stop(1,1)[m?"animate":"css"]({left:t+"%"},d),1===s&&r.range[m?"animate":"css"]({width:t-e+"%"},{queue:!1,duration:d})):(0===s&&r.range.stop(1,1)[m?"animate":"css"]({bottom:t+"%"},d),1===s&&r.range[m?"animate":"css"]({height:t-e+"%"},{queue:!1,duration:d}))),e=t}):(s=this.value(),a=l,n=o,t=n!==a?100*((s-a)/(n-a)):0,g["horizontal"===this.orientation?"left":"bottom"]=t+"%",this.handle.stop(1,1)[m?"animate":"css"](g,d),"min"===h&&"horizontal"===this.orientation&&this.range.stop(1,1)[m?"animate":"css"]({width:t+"%"},d),"max"===h&&"horizontal"===this.orientation&&this.range[m?"animate":"css"]({width:100-t+"%"},{queue:!1,duration:d}),"min"===h&&"vertical"===this.orientation&&this.range.stop(1,1)[m?"animate":"css"]({height:t+"%"},d),"max"===h&&"vertical"===this.orientation&&this.range[m?"animate":"css"]({height:100-t+"%"},{queue:!1,duration:d}))}});s.exports=n}),define("alipay/slider/1.1.1/mouse",["$","arale/widget/1.0.3/widget","arale/base/1.0.1/base","arale/class/1.0.0/class","arale/events/1.0.0/events"],function(e,t,s){var i=e("$"),a=e("arale/widget/1.0.3/widget"),n=a.extend({attrs:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.on("mousedown."+this.cid,function(t){return e._mouseDown(t)}).on("click."+this.cid,function(t){return!0===i.data(t.target,e.cid+".preventClickEvent")?(i.removeData(t.target,e.cid+".preventClickEvent"),t.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.cid),this._mouseMoveDelegate&&i(document).unbind("mousemove."+this.cid,this._mouseMoveDelegate).unbind("mouseup."+this.ci,this._mouseUpDelegate)},_mouseDown:function(e){if(!n.handled){this._mouseStarted&&this._mouseUp(e),this._mouseDownEvent=e;var t=this,s=1===e.which,a=t.get("cancel"),h=t.get("delay"),u="string"==typeof a&&e.target.nodeName?i(e.target).closest(a).length:!1;return s&&!u&&this._mouseCapture(e)?(this.mouseDelayMet=!h,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){t.mouseDelayMet=!0},h)),this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(e)!==!1,!this._mouseStarted)?(e.preventDefault(),!0):(!0===i.data(e.target,this.cid+".preventClickEvent")&&i.removeData(e.target,this.cid+".preventClickEvent"),this._mouseMoveDelegate=i.proxy(this,"_mouseMove"),this._mouseUpDelegate=i.proxy(this,"_mouseUp"),i(document).on("mousemove."+this.cid,this._mouseMoveDelegate).on("mouseup."+this.cid,this._mouseUpDelegate),e.preventDefault(),n.handled=!0,!0)):!0}},_mouseMove:function(e){return!i.browser.msie||document.documentMode>=9||e.button?this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent)!==!1,this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted):this._mouseUp(e)},_mouseUp:function(e){return e||(e=i.Event("mouseup")),i(document).unbind("mousemove."+this.cid,this._mouseMoveDelegate).unbind("mouseup."+this.cid,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&i.data(e.target,this.cid+".preventClickEvent",!0),this._mouseStop(e)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.get("distance")},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}});n.handled=!1,i(document).mouseup(function(){n.handled=!1}),s.exports=n});
